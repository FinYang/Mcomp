<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forecast comparisons using the Mcomp package • Mcomp</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Forecast comparisons using the Mcomp package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Mcomp</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/Mcomp.html">Introduction</a>
</li>
<li>
  <a href="../articles/Comparisons.html">Forecast comparisons</a>
</li>
<li>
  <a href="../news/index.html">Change Log</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/robjhyndman/Mcomp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Forecast comparisons using the Mcomp package</h1>
                        <h4 class="author">Rob J Hyndman</h4>
            
            <h4 class="date">2018-08-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/robjhyndman/Mcomp/blob/master/vignettes/Comparisons.Rmd"><code>vignettes/Comparisons.Rmd</code></a></small>
      <div class="hidden name"><code>Comparisons.Rmd</code></div>

    </div>

    
    
<p>The <a href="https://doi.org/10.1016/S0169-2070(00)00057-1">M3 competition results</a> are publicly available in an IJF paper published in 2000. The best performing methods overall were the Theta method, ForecastPro and ForecastX, as measured by the symmetric MAPE (sMAPE) that was favoured by Makridakis and Hibon. The following table shows some of the results from the original competition including results from the main commercial software vendors. The first sMAPE column is taken from the original paper. My own recalculation of the sMAPE results usually gives values slightly less than those published (I don’t know why). The MAPE column shows the mean absolute percentage error and the MASE column shows the mean absolute scaled errors.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Original M3 forecasts</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">nseries &lt;-<span class="st"> </span><span class="kw">length</span>(M3)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">theta &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(M3Forecast<span class="op">$</span>THETA)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">fpro &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(M3Forecast<span class="op">$</span>ForecastPro)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">fcx &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(M3Forecast<span class="op">$</span>ForcX)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">bjauto &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(M3Forecast<span class="op">$</span><span class="st">`</span><span class="dt">B-J auto</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">ab1 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(M3Forecast<span class="op">$</span>AutoBox1)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">ab2 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(M3Forecast<span class="op">$</span>AutoBox2)</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">ab3 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(M3Forecast<span class="op">$</span>AutoBox3)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">ets1 &lt;-<span class="st"> </span>aarima &lt;-<span class="st"> </span>hybrid &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow=</span>nseries, <span class="dt">ncol=</span><span class="dv">18</span>)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co"># ETS and ARIMA forecasts, and combination</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq</span>(nseries)) {</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">  ets1[i, ] &lt;-<span class="st"> </span><span class="kw">forecast</span>(<span class="kw">ets</span>(M3[[i]]<span class="op">$</span>x), <span class="dt">h=</span><span class="dv">18</span>, <span class="dt">PI=</span><span class="ot">FALSE</span>)<span class="op">$</span>mean</a>
<a class="sourceLine" id="cb1-14" data-line-number="14">  aarima[i, ] &lt;-<span class="st"> </span><span class="kw">forecast</span>(<span class="kw">auto.arima</span>(M3[[i]]<span class="op">$</span>x), <span class="dt">h=</span><span class="dv">18</span>)<span class="op">$</span>mean</a>
<a class="sourceLine" id="cb1-15" data-line-number="15">  hybrid[i, ] &lt;-<span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>(aarima[i, ] <span class="op">+</span><span class="st"> </span>ets1[i, ])</a>
<a class="sourceLine" id="cb1-16" data-line-number="16">}</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Compute accuracy of all methods</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">mase &lt;-<span class="st"> </span>mape &lt;-<span class="st"> </span>smape &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">10</span>, <span class="dt">ncol=</span>nseries)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">f &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">10</span>, <span class="dt">ncol=</span><span class="dv">18</span>)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq</span>(nseries)) {</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  x &lt;-<span class="st"> </span>M3[[i]]<span class="op">$</span>xx</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  f[<span class="dv">1</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>theta[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">  f[<span class="dv">2</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>fpro[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">  f[<span class="dv">3</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>fcx[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">  f[<span class="dv">4</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>bjauto[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">  f[<span class="dv">5</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>ab1[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">  f[<span class="dv">6</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>ab2[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">  f[<span class="dv">7</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>ab3[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">  f[<span class="dv">8</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>ets1[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">  f[<span class="dv">9</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>aarima[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">  f[<span class="dv">10</span>, <span class="kw">seq</span>(n)] &lt;-<span class="st"> </span>hybrid[i, <span class="kw">seq</span>(n)]</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">  scale &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">abs</span>(<span class="kw">diff</span>(M3[[i]]<span class="op">$</span>x, <span class="dt">lag =</span> <span class="kw">frequency</span>(x))))</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">  <span class="cf">for</span> (j <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">10</span>)) {</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">    e &lt;-<span class="st"> </span><span class="kw">abs</span>((x <span class="op">-</span><span class="st"> </span>f[j, <span class="kw">seq</span>(n)]))</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">    mape[j, i] &lt;-<span class="st"> </span><span class="kw">mean</span>(e <span class="op">/</span><span class="st"> </span>x) <span class="op">*</span><span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21">    smape[j, i] &lt;-<span class="st"> </span><span class="kw">mean</span>(e <span class="op">/</span><span class="st"> </span>(<span class="kw">abs</span>(x) <span class="op">+</span><span class="st"> </span><span class="kw">abs</span>(f[j, <span class="kw">seq</span>(n)]))) <span class="op">*</span><span class="st"> </span><span class="dv">200</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22">    mase[j, i] &lt;-<span class="st"> </span><span class="kw">mean</span>(e <span class="op">/</span><span class="st"> </span>scale)</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">  }</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">}</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">m3table &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="dv">10</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">m3table[, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">rowMeans</span>(mape, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">m3table[, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">rowMeans</span>(smape)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">m3table[, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">rowMeans</span>(mase)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="kw">rownames</span>(m3table) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Theta"</span>, <span class="st">"ForecastPro"</span>, <span class="st">"ForecastX"</span>, <span class="st">"BJauto"</span>,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">            <span class="st">"Autobox1"</span>, <span class="st">"Autobox2"</span>, <span class="st">"Autobox3"</span>, <span class="st">"ETS"</span>, <span class="st">"AutoARIMA"</span>, <span class="st">"Hybrid"</span>)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="kw">colnames</span>(m3table) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"MAPE"</span>, <span class="st">"Average_sMAPE_recalculated"</span>, <span class="st">"MASE"</span>)</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">j &lt;-<span class="st"> </span><span class="kw">order</span>(m3table[, <span class="dv">3</span>])</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">m3table &lt;-<span class="st"> </span><span class="kw">cbind</span>(m3table,</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">  <span class="dt">Average_sMAPE =</span> <span class="kw">c</span>(<span class="fl">13.01</span>, <span class="fl">13.19</span>, <span class="fl">13.49</span>, <span class="fl">14.01</span>, <span class="fl">15.23</span>, <span class="fl">14.41</span>, <span class="fl">15.33</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="kw">kable</span>(<span class="kw">round</span>(m3table[</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">  <span class="kw">c</span>(<span class="st">"Theta"</span>, <span class="st">"ForecastPro"</span>, <span class="st">"ForecastX"</span>, <span class="st">"BJauto"</span>, <span class="st">"Autobox2"</span>, <span class="st">"Autobox1"</span>, <span class="st">"Autobox3"</span>),</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">  <span class="kw">c</span>(<span class="st">"Average_sMAPE"</span>, <span class="st">"Average_sMAPE_recalculated"</span>, <span class="st">"MAPE"</span>, <span class="st">"MASE"</span>)], <span class="dv">2</span>))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">Average_sMAPE</th>
<th align="right">Average_sMAPE_recalculated</th>
<th align="right">MAPE</th>
<th align="right">MASE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Theta</td>
<td align="right">13.01</td>
<td align="right">12.76</td>
<td align="right">17.42</td>
<td align="right">1.39</td>
</tr>
<tr class="even">
<td>ForecastPro</td>
<td align="right">13.19</td>
<td align="right">13.06</td>
<td align="right">18.00</td>
<td align="right">1.47</td>
</tr>
<tr class="odd">
<td>ForecastX</td>
<td align="right">13.49</td>
<td align="right">13.09</td>
<td align="right">17.35</td>
<td align="right">1.42</td>
</tr>
<tr class="even">
<td>BJauto</td>
<td align="right">14.01</td>
<td align="right">13.72</td>
<td align="right">19.13</td>
<td align="right">1.54</td>
</tr>
<tr class="odd">
<td>Autobox2</td>
<td align="right">14.41</td>
<td align="right">13.82</td>
<td align="right">18.23</td>
<td align="right">1.51</td>
</tr>
<tr class="even">
<td>Autobox1</td>
<td align="right">15.23</td>
<td align="right">15.20</td>
<td align="right">20.36</td>
<td align="right">1.69</td>
</tr>
<tr class="odd">
<td>Autobox3</td>
<td align="right">15.33</td>
<td align="right">15.46</td>
<td align="right">19.31</td>
<td align="right">1.57</td>
</tr>
</tbody>
</table>
<p>BJ automatic was produced by ForecastPro but with the forecasts restricted to ARIMA models. For some reason, Autobox was allowed three separate submissions (a practice normally not allowed as it leads to over-fitting on the test set).</p>
<p>Any good forecasting software should be aiming to get close to (or better than) Theta on this test. After all, the M3 competition was held nearly 20 years ago. Presumably all of the software companies have tried to improve their results since then. Unfortunately, none of them to my knowledge has published any updated figures. I wish they would, preferably independently verified. It would provide some evidence that they are improving their algorithms.</p>
<p>My aim with the <a href="https://pkg.robjhyndman.com/forecast/">forecast package for R</a> is to make freely available state-of-the-art algorithms for some forecasting models. I do not attempt to offer a comprehensive suite of algorithms, but what I do provide gives forecasts that are in the same ballpark as the best methods in the M3 competition. Here is the evidence.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">round</span>(m3table[<span class="kw">c</span>(<span class="st">"ETS"</span>, <span class="st">"AutoARIMA"</span>, <span class="st">"Hybrid"</span>),</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">                    <span class="kw">c</span>(<span class="st">"Average_sMAPE_recalculated"</span>, <span class="st">"MAPE"</span>, <span class="st">"MASE"</span>)], <span class="dv">2</span>))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">Average_sMAPE_recalculated</th>
<th align="right">MAPE</th>
<th align="right">MASE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ETS</td>
<td align="right">13.07</td>
<td align="right">17.69</td>
<td align="right">1.43</td>
</tr>
<tr class="even">
<td>AutoARIMA</td>
<td align="right">13.61</td>
<td align="right">18.77</td>
<td align="right">1.45</td>
</tr>
<tr class="odd">
<td>Hybrid</td>
<td align="right">12.79</td>
<td align="right">17.70</td>
<td align="right">1.40</td>
</tr>
</tbody>
</table>
<p>The last method is a simple average of the forecasts from <code>ets()</code> and <code>auto.arima()</code>. If you only want point forecasts for annual, monthly or quarterly data, that is the best approach currently available in the forecast package. It is also better than any of the commercial software (at least as far as they have been prepared to subject their algorithms to independent testing).</p>
<p>Unlike the commercial vendors, you don’t have to take my word for it. My algorithms are open source.</p>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p><a href="https://doi.org/10.1016/S0169-2070(00)00057-1">Makridakis and Hibon (2000) The M3-competition: results, conclusions and implications. <em>International Journal of Forecasting</em>, <strong>16</strong>, 451-476.</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://robjhyndman.com">Rob Hyndman</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
